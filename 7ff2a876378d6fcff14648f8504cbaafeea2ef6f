{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "12e4258c_0db3e484",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2024-02-08T13:08:47Z",
      "side": 1,
      "message": "I\u0027d like us to give an indication of which area of the code this issue was found into.\n\nHow about the following?\n```\nfix(arm): check for null before calling I/O policy callback\n```",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 45
      },
      "revId": "7ff2a876378d6fcff14648f8504cbaafeea2ef6f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9de2c3de_731ec047",
        "filename": "plat/arm/common/arm_fwu_io_storage.c",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2024-02-08T13:08:47Z",
      "side": 1,
      "message": "Just for my understanding...\n\nYou wrote in the commit message:\n\u003e I stumbled across this when passing a non-present image id into the plat_get_image_source function\n\nI guess the said image id was within the bounds of the policies array? Otherwise this assertion would have fired? So the image id you passed corresponded to an empty entry within the array bounds? Or was the issue encountered with an image id beyond the array bounds with a release build, hence you did not have this assertion as a safeguard?",
      "range": {
        "startLine": 157,
        "startChar": 1,
        "endLine": 157,
        "endChar": 41
      },
      "revId": "7ff2a876378d6fcff14648f8504cbaafeea2ef6f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1f355d3b_91ea0586",
        "filename": "plat/arm/common/arm_fwu_io_storage.c",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2024-02-09T15:26:34Z",
      "side": 1,
      "message": "\u003e  So the image id you passed corresponded to an empty entry within the array bounds? Or was the issue encountered with an image id beyond the array bounds with a release build, hence you did not have this assertion as a safeguard?\n\nAs far as I understand, it addresses both cases. \nHowever, we typically use \u0027assert\u0027 for programmatic errors, assuming they will never occur. However, I have reservations about relying solely on this assert, as it only verifies the bound without confirming whether the entry is null or not.\nMay be adding extra assert will be helpful instead of if check as below, just checking?\n\n``\nassert(policy-\u003echeck !\u003d NULL)\n``",
      "parentUuid": "9de2c3de_731ec047",
      "range": {
        "startLine": 157,
        "startChar": 1,
        "endLine": 157,
        "endChar": 41
      },
      "revId": "7ff2a876378d6fcff14648f8504cbaafeea2ef6f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2570383e_dab2411d",
        "filename": "plat/arm/common/arm_fwu_io_storage.c",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2024-02-09T15:27:47Z",
      "side": 1,
      "message": "Also, good to add similar check or assert in TF-A code also: https://git.trustedfirmware.org/TF-A/trusted-firmware-a.git/tree/plat/arm/common/arm_io_storage.c#n127",
      "parentUuid": "1f355d3b_91ea0586",
      "range": {
        "startLine": 157,
        "startChar": 1,
        "endLine": 157,
        "endChar": 41
      },
      "revId": "7ff2a876378d6fcff14648f8504cbaafeea2ef6f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b2fc670b_80cb34b7",
        "filename": "plat/arm/common/arm_fwu_io_storage.c",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1000272
      },
      "writtenOn": "2024-02-10T14:58:24Z",
      "side": 1,
      "message": "It was the former; The image id I passed corresponded to an empty entry within the array bounds and the policies were all empty.",
      "parentUuid": "2570383e_dab2411d",
      "range": {
        "startLine": 157,
        "startChar": 1,
        "endLine": 157,
        "endChar": 41
      },
      "revId": "7ff2a876378d6fcff14648f8504cbaafeea2ef6f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}