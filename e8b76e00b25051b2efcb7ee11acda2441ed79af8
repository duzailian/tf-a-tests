{
  "comments": [
    {
      "key": {
        "uuid": "9830b15c_0d33eb94",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000018
      },
      "writtenOn": "2019-10-10T13:53:51Z",
      "side": 1,
      "message": "Suggestion: give a false positive.",
      "range": {
        "startLine": 10,
        "startChar": 3,
        "endLine": 10,
        "endChar": 15
      },
      "revId": "e8b76e00b25051b2efcb7ee11acda2441ed79af8",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2dc26bd7_3104eae2",
        "filename": "tftf/tests/misc_tests/test_pmu_leakage.c",
        "patchSetId": 1
      },
      "lineNbr": 250,
      "author": {
        "id": 1000124
      },
      "writtenOn": "2019-10-09T15:58:37Z",
      "side": 1,
      "message": "Perhaps a comment on the purpose of the function could be added here?",
      "revId": "e8b76e00b25051b2efcb7ee11acda2441ed79af8",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1be13f2f_e63486c4",
        "filename": "tftf/tests/misc_tests/test_pmu_leakage.c",
        "patchSetId": 1
      },
      "lineNbr": 250,
      "author": {
        "id": 1000251
      },
      "writtenOn": "2019-10-10T09:08:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2dc26bd7_3104eae2",
      "revId": "e8b76e00b25051b2efcb7ee11acda2441ed79af8",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3faf5b7a_9865765a",
        "filename": "tftf/tests/misc_tests/test_pmu_leakage.c",
        "patchSetId": 1
      },
      "lineNbr": 278,
      "author": {
        "id": 1000018
      },
      "writtenOn": "2019-10-10T13:53:51Z",
      "side": 1,
      "message": "While the overflow is causing bad behavior here, I am not sure if this is the right place to address the issue. If there is an overflow, that is a measurement error, and it might be better to fix it part of the measurement.\nThis fix has to be applied to all places where measure_event() is called. Would it be possible to move it inside measure_event()?",
      "revId": "e8b76e00b25051b2efcb7ee11acda2441ed79af8",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "df16682c_bee3dee2",
        "filename": "tftf/tests/misc_tests/test_pmu_leakage.c",
        "patchSetId": 1
      },
      "lineNbr": 278,
      "author": {
        "id": 1000251
      },
      "writtenOn": "2019-10-10T16:02:44Z",
      "side": 1,
      "message": "It is not overflow that is causing trouble because event counts are never greater than 10,000 and the iteration count is 1,000. Therefore, the `sum` variable in `measure_event()` should never exceed 10,000,000 with the SMC calls used here (even when counters are being leaked).\n\nThe problem is caused by an underflow which happened when `cpu_suspend.avg` \u003c `baseline.avg`. For example, if `cpu_suspend.avg` \u003d\u003d N and `baseline.avg` \u003d\u003d N + 1, then `cpu_suspend.avg` - `baseline.avg` \u003d\u003d 0xffffffffffffffff. In this case, the difference would be considered greater than `baseline.avg` / ALLOWED_DEVIATION because these are unsigned types. The root cause is the `read_pmevcntr0_el0()` and `read_pmccntr_el0` functions returning an unsigned type (u_register_t).\n\nI contemplated using signed types for this when I became aware of the problem but I thought it might look suspicious using a long long variable to store the result of a function which returns u_register_t and that it would require more explanation in the code (in more than one place).",
      "parentUuid": "3faf5b7a_9865765a",
      "revId": "e8b76e00b25051b2efcb7ee11acda2441ed79af8",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    }
  ]
}