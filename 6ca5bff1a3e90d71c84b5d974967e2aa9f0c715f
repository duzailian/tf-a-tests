{
  "comments": [
    {
      "key": {
        "uuid": "131a72f3_c20d4819",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-04-09T14:46:27Z",
      "side": 1,
      "message": "The commit message does not explain why we want to prevent the compiler from generating unaligned accesses, despite the SCTLR.A bit being cleared (which means the CPU allows them).",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 24
      },
      "revId": "6ca5bff1a3e90d71c84b5d974967e2aa9f0c715f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cc64a2f5_c59132b0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1000105
      },
      "writtenOn": "2019-04-09T14:57:32Z",
      "side": 1,
      "message": "TF test has several cases of code which:\n\t/* --------------------------------------------------------------------\n\t * Enable the instruction cache and stack pointer alignment checks.\n\t * --------------------------------------------------------------------\n\nGCC generates unaligned accesses using SP for local structures.",
      "parentUuid": "131a72f3_c20d4819",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 24
      },
      "revId": "6ca5bff1a3e90d71c84b5d974967e2aa9f0c715f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c2060bf3_f7ed4a99",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-04-09T15:06:46Z",
      "side": 1,
      "message": "I see, thanks for the background information, Alexei. Now I understand, as we indeed clear the SCTLR.A bit but we set the SCTLR.SA bit, which is the one forbidding unaligned stack accesses here. Do you reckon clearing the SCTLR.SA bit would be another, valid way to fix this issue then, rather than using the -mstrict-align flag?\n\nIf we go with the -mstrict-align, I still feel like the rationale should be called out in the commit message.\n\nAlso, I think we should be consistent: either we clear both the A and SA bits in SCTLR (and we use no additional build flags) or we set both bits and use -mstrict-align/-mno-unaligned-access.",
      "parentUuid": "cc64a2f5_c59132b0",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 24
      },
      "revId": "6ca5bff1a3e90d71c84b5d974967e2aa9f0c715f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "16a1e642_1513e0c4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1000054
      },
      "writtenOn": "2019-04-10T15:32:09Z",
      "side": 1,
      "message": "do we need unaligned accesses? \n\nI don\u0027t have a strong opinion on this, but doing it with flags would be consistent with the TF-A codebase. As we don\u0027t really care about the size of tf-a-tests, I don\u0027t see a disadvantage to using strict alignment.",
      "parentUuid": "c2060bf3_f7ed4a99",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 24
      },
      "revId": "6ca5bff1a3e90d71c84b5d974967e2aa9f0c715f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0e16a5ba_032310ef",
        "filename": "Makefile",
        "patchSetId": 2
      },
      "lineNbr": 190,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-04-09T14:46:27Z",
      "side": 1,
      "message": "I think the AArch32 equivalent of -mstrict-align is: -mno-unaligned-access. Should we add it to the AArch32 C/ASFLAGS as well? Or is there already some other flag that prevents the AArch32 compiler from generating unaligned accesses?",
      "range": {
        "startLine": 189,
        "startChar": 0,
        "endLine": 190,
        "endChar": 45
      },
      "revId": "6ca5bff1a3e90d71c84b5d974967e2aa9f0c715f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    }
  ]
}