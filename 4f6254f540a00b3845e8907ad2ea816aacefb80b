{
  "comments": [
    {
      "key": {
        "uuid": "4a00f398_52cb04e5",
        "filename": "lib/irq/irq.c",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2018-12-06T11:30:50Z",
      "side": 1,
      "message": "I think this bug was introduced because there is a misalignment between PLAT_MAX_SPI_OFFSET_ID being an offset from IRQ #32 and MAX_PPI_ID being the actual interrupt number, not an offset. This creates confusion. We should look into using offsets in both cases, or absolute values in both cases.",
      "revId": "4f6254f540a00b3845e8907ad2ea816aacefb80b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f7c981c7_e3ad139c",
        "filename": "lib/irq/irq.c",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000050
      },
      "writtenOn": "2018-12-10T13:10:01Z",
      "side": 1,
      "message": "I\u0027m not sure this is the correct fix. The spi_desc_table[] is used in lib/irq/irq.c in line 46. In there it is accessed as \"spi_desc_table[irq_num - MIN_SPI_ID]\" because the code is expected to skip the first MIN_SPI_ID handlers.\n\nI think that this change will make the code not complain about the array being too small, but the resulting code will use the wrong handlers for the SPI handling.",
      "parentUuid": "4a00f398_52cb04e5",
      "revId": "4f6254f540a00b3845e8907ad2ea816aacefb80b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d171402c_e79e0454",
        "filename": "lib/irq/irq.c",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2018-12-10T13:22:09Z",
      "side": 1,
      "message": "\u003e The spi_desc_table[] is used\n \u003e in lib/irq/irq.c in line 46. In there it is accessed as\n \u003e \"spi_desc_table[irq_num - MIN_SPI_ID]\" because the code is expected\n \u003e to skip the first MIN_SPI_ID handlers.\n\nI believe this is actually the bug itself. If irq_num corresponds to an SPI then it is in the range [MIN_SPI_ID:(PLAT_MAX_SPI_OFFSET_ID + MIN_SPI_ID)]. By subtracting by MIN_SPI_ID at line 46, we bring it in range [0:PLAT_MAX_SPI_OFFSET_ID]. So I think the fix is correct.",
      "parentUuid": "f7c981c7_e3ad139c",
      "revId": "4f6254f540a00b3845e8907ad2ea816aacefb80b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    }
  ]
}