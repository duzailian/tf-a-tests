{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "38b71a61_2b0756b9",
        "filename": "tftf/tests/context_mgmt_tests/el2/test_spm_el2_context_mgmt.c",
        "patchSetId": 15
      },
      "lineNbr": 61,
      "author": {
        "id": 1000744
      },
      "writtenOn": "2024-10-30T09:18:00Z",
      "side": 1,
      "message": "What is the purpose of this check? Isnâ€™t context management at EL3 the only thing we care about in this test?",
      "revId": "32b8909e90582c4bb0690a822bc5c67a5f262f68",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6f48740b_67ec0d6c",
        "filename": "tftf/tests/context_mgmt_tests/el2/test_spm_el2_context_mgmt.c",
        "patchSetId": 15
      },
      "lineNbr": 61,
      "author": {
        "id": 1001423
      },
      "writtenOn": "2024-10-30T11:33:06Z",
      "side": 1,
      "message": "The idea, at least as far as I understand it, is that we are checking (while not being in EL3) whether the context management library has done its work correctly. This is why the Expected and Actual contexts should match - because the library is supposed to save the non-secure context for it to then be fully restored back after executing secure-state code.",
      "parentUuid": "38b71a61_2b0756b9",
      "revId": "32b8909e90582c4bb0690a822bc5c67a5f262f68",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "de13fca9_2f692830",
        "filename": "tftf/tests/context_mgmt_tests/el2/test_spm_el2_context_mgmt.c",
        "patchSetId": 15
      },
      "lineNbr": 61,
      "author": {
        "id": 1000744
      },
      "writtenOn": "2024-10-30T11:47:44Z",
      "side": 1,
      "message": "Sorry, for whatever reason gerrit highlhgted line 61 rather than 57. What is the point of checking ctx_original against ctx_final is what I meant? It looks to me like we\u0027re restoring the original context and checking whether it has been properly restored.",
      "parentUuid": "6f48740b_67ec0d6c",
      "revId": "32b8909e90582c4bb0690a822bc5c67a5f262f68",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f4d018d8_840dd09a",
        "filename": "tftf/tests/context_mgmt_tests/el2/test_spm_el2_context_mgmt.c",
        "patchSetId": 15
      },
      "lineNbr": 61,
      "author": {
        "id": 1001423
      },
      "writtenOn": "2024-10-30T13:22:55Z",
      "side": 1,
      "message": "This was done just for the purposes of restoring the registers to a valid state, so that control flow doesn\u0027t break and other code (including other tests) can run normally after this test finishes.\nThis is a warning, so if that operation fails, it will still try to continue.",
      "parentUuid": "de13fca9_2f692830",
      "revId": "32b8909e90582c4bb0690a822bc5c67a5f262f68",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5d4249d1_4dd88b7b",
        "filename": "tftf/tests/context_mgmt_tests/el2/test_spm_el2_context_mgmt.c",
        "patchSetId": 15
      },
      "lineNbr": 61,
      "author": {
        "id": 1000660
      },
      "writtenOn": "2024-10-30T14:00:38Z",
      "side": 1,
      "message": "Adding on top of Harrison\u0027s comment.\n\nWe actually dont need ```ctx_final``` struct here.\nYou ultimately want to restore the registers content back to default values which was there before corruption. So line 54 does that.\n\nAdditional check at 57 again maybe not needed, eventhough its not harmful.\nMaybe You could simplify this by just restoring the registers back to original values and jump to actual comparison of corrupted contexts.(line 60)",
      "parentUuid": "f4d018d8_840dd09a",
      "revId": "32b8909e90582c4bb0690a822bc5c67a5f262f68",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ba78b25e_bef8a5de",
        "filename": "tftf/tests/context_mgmt_tests/el2/test_spm_el2_context_mgmt.c",
        "patchSetId": 15
      },
      "lineNbr": 61,
      "author": {
        "id": 1001423
      },
      "writtenOn": "2024-10-30T14:18:29Z",
      "side": 1,
      "message": "Yes, that\u0027s true, the ``ctx_final`` here is only used for either printing the warning or not. In my opinion, it is useful to include it. But if really necessary, I can remove.",
      "parentUuid": "5d4249d1_4dd88b7b",
      "revId": "32b8909e90582c4bb0690a822bc5c67a5f262f68",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6181754e_b10829e6",
        "filename": "tftf/tests/context_mgmt_tests/el2/test_spm_el2_context_mgmt.c",
        "patchSetId": 15
      },
      "lineNbr": 61,
      "author": {
        "id": 1000660
      },
      "writtenOn": "2024-10-31T10:23:23Z",
      "side": 1,
      "message": "I believe when you restore registers to original value its sufficient. Those were the original values before you started the test and will be restored mostly in all cases, as you are not writing some rand values and wanted to check again.\nNot sure we do see any failures here. I might be missing some info.\nSo IMO would be good to remove it.\nIts a nitpick, those lines aren\u0027t adding any harm. Just to keep the test simple suggesting it.",
      "parentUuid": "ba78b25e_bef8a5de",
      "revId": "32b8909e90582c4bb0690a822bc5c67a5f262f68",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "963d869e_bf58db36",
        "filename": "tftf/tests/context_mgmt_tests/el2/test_spm_el2_context_mgmt.c",
        "patchSetId": 15
      },
      "lineNbr": 61,
      "author": {
        "id": 1001423
      },
      "writtenOn": "2024-10-31T10:42:51Z",
      "side": 1,
      "message": "As the entire test was adapted for a virtual model anyway, it might indeed be worth removing that part of the code since it does not fail under such a configuration. ACK",
      "parentUuid": "6181754e_b10829e6",
      "revId": "32b8909e90582c4bb0690a822bc5c67a5f262f68",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b278ba41_ec831be2",
        "filename": "tftf/tests/context_mgmt_tests/el2/test_spm_el2_context_mgmt.c",
        "patchSetId": 15
      },
      "lineNbr": 61,
      "author": {
        "id": 1001423
      },
      "writtenOn": "2024-11-05T10:02:23Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "963d869e_bf58db36",
      "revId": "32b8909e90582c4bb0690a822bc5c67a5f262f68",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}