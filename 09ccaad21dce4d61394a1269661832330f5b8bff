{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "c56d02d2_864973b7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 17,
      "author": {
        "id": 1000341
      },
      "writtenOn": "2023-10-25T10:33:40Z",
      "side": 1,
      "message": "could you detail how the failure would manifest itself?",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 17,
        "endChar": 29
      },
      "revId": "09ccaad21dce4d61394a1269661832330f5b8bff",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c77d03d_237a8796",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 17,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2023-10-26T07:23:08Z",
      "side": 1,
      "message": "The visible criterion is that the engine fails the operation:\nhttps://review.trustedfirmware.org/c/TF-A/tf-a-tests/+/24315/6/tftf/tests/runtime_services/secure_service/test_spm_smmu.c#130\n\nThen when looking at SMMU logs in lava.log it should report a GPC check fail:\nhttps://ci-builds.trustedfirmware.org/static-files/m9rHI9DOHmXU89IJO67dThBevmAspKI7tdPkJKWxeHAxNjk4MjUyNjQ0ODY2Ojc6b2RlcHJlejpqb2IvdGYtYS1idWlsZGVyLzI3NDIyNzMvYXJ0aWZhY3Q\u003d/lava.log\nIdeally we\u0027d parse this log with an expect script but I\u0027m unsure if this is possible (not a monitored uart log).\n\nHowever I miss to find the GPC check error reported there, so I suspect the test is no longer behaving properly! It was worth asking!\n\nI\u0027m turning the change to WIP while looking at what\u0027s going on.",
      "parentUuid": "c56d02d2_864973b7",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 17,
        "endChar": 29
      },
      "revId": "09ccaad21dce4d61394a1269661832330f5b8bff",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2941b77a_15305092",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 17,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2023-12-18T11:36:05Z",
      "side": 1,
      "message": "Fixed now.\n\nOn GPC failure, the SMMU generic trace emits:\n\n    pci_smmuv3.mmu.verbose_commentary: output\u003d\"Final PA of transaction failed its GPT checks:-\"\n    pci_smmuv3.mmu.verbose_commentary: output\u003d\"    0x0000000090000000 ns-irawaWB-orawaWB-ish-DU\"\n    pci_smmuv3.mmu.verbose_commentary: output\u003d\"    GPF-SMMU_ROOT_GPF_FAR:[ FPAS:ns FADDR_51_12:0x0000090000[000] SYN_11_0:gpfsyn_transaction ]-ns-irawaWB-orawaWB-\"\n\nThis isn\u0027t a log we can catch with an expect script unfortunately (but can be checked visually from the CI logs).\nI\u0027m preparing an additional change added on top, to retrieve the SMMU_ROOT_GPF_FAR register from EL3 and check it matches to fault recorded from within the partition.",
      "parentUuid": "4c77d03d_237a8796",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 17,
        "endChar": 29
      },
      "revId": "09ccaad21dce4d61394a1269661832330f5b8bff",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "df01d279_a7f2f374",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 17,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2023-12-18T14:08:49Z",
      "side": 1,
      "message": "You can search for \"Final PA of transaction failed its GPT checks\" from the lava log:\nhttps://ci-builds.trustedfirmware.org/static-files/5LYOfYT0iD6PYs4mQTIsDuT9mDgKNyI-5RkKThdJBHgxNzAyOTA4NDIxNzIzOjk6YW5vbnltb3VzOmpvYi90Zi1hLWJ1aWxkZXIvMjk2NjcxOC9hcnRpZmFjdA\u003d\u003d/lava.log",
      "parentUuid": "2941b77a_15305092",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 17,
        "endChar": 29
      },
      "revId": "09ccaad21dce4d61394a1269661832330f5b8bff",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "13df54ef_1439f87b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 17,
      "author": {
        "id": 1000341
      },
      "writtenOn": "2023-12-19T17:01:09Z",
      "side": 1,
      "message": "Thanks for this.",
      "parentUuid": "df01d279_a7f2f374",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 17,
        "endChar": 29
      },
      "revId": "09ccaad21dce4d61394a1269661832330f5b8bff",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "06887abd_75be81ca",
        "filename": "spm/cactus/plat/arm/fvp/fdts/cactus.dts",
        "patchSetId": 6
      },
      "lineNbr": 97,
      "author": {
        "id": 1000341
      },
      "writtenOn": "2023-10-25T10:33:40Z",
      "side": 1,
      "message": "Similarly to what asked in the previous patch...\nShouldn\u0027t this be defined as device memory?",
      "range": {
        "startLine": 92,
        "startChar": 2,
        "endLine": 97,
        "endChar": 4
      },
      "revId": "09ccaad21dce4d61394a1269661832330f5b8bff",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b0dc9127_5ac1fbbe",
        "filename": "spm/cactus/plat/arm/fvp/fdts/cactus.dts",
        "patchSetId": 6
      },
      "lineNbr": 97,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2023-10-25T10:37:07Z",
      "side": 1,
      "message": "I don\u0027t think so, the secure peripheral operates on normal memory work buffers.",
      "parentUuid": "06887abd_75be81ca",
      "range": {
        "startLine": 92,
        "startChar": 2,
        "endLine": 97,
        "endChar": 4
      },
      "revId": "09ccaad21dce4d61394a1269661832330f5b8bff",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b28f8be3_ca13a548",
        "filename": "spm/cactus/plat/arm/fvp/fdts/cactus.dts",
        "patchSetId": 6
      },
      "lineNbr": 97,
      "author": {
        "id": 1000341
      },
      "writtenOn": "2023-10-25T12:48:13Z",
      "side": 1,
      "message": "Acknowledged\nGot it now.",
      "parentUuid": "b0dc9127_5ac1fbbe",
      "range": {
        "startLine": 92,
        "startChar": 2,
        "endLine": 97,
        "endChar": 4
      },
      "revId": "09ccaad21dce4d61394a1269661832330f5b8bff",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cb51c826_c68c0bb2",
        "filename": "tftf/tests/runtime_services/secure_service/test_spm_smmu.c",
        "patchSetId": 6
      },
      "lineNbr": 111,
      "author": {
        "id": 1000341
      },
      "writtenOn": "2023-10-25T10:33:40Z",
      "side": 1,
      "message": "nitpick: align.\nline 104 bigger than line 110, even if you add the variable there.",
      "range": {
        "startLine": 111,
        "startChar": 2,
        "endLine": 111,
        "endChar": 3
      },
      "revId": "09ccaad21dce4d61394a1269661832330f5b8bff",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e9313068_9d9ba6f7",
        "filename": "tftf/tests/runtime_services/secure_service/test_spm_smmu.c",
        "patchSetId": 6
      },
      "lineNbr": 111,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2023-10-26T07:23:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cb51c826_c68c0bb2",
      "range": {
        "startLine": 111,
        "startChar": 2,
        "endLine": 111,
        "endChar": 3
      },
      "revId": "09ccaad21dce4d61394a1269661832330f5b8bff",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}