{
  "comments": [
    {
      "key": {
        "uuid": "c9a194e2_0c43a359",
        "filename": "spm/common/sp_helpers.c",
        "patchSetId": 1
      },
      "lineNbr": 78,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2021-01-07T17:45:55Z",
      "side": 1,
      "message": "is the timer delay long enough to guarantee that we will be in the busy wait loop? If not the test could hang.",
      "revId": "ee014ce24a1a770d2e9d0eacf01839ec1b44f3d2",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c5759d6_04675e8c",
        "filename": "spm/common/sp_helpers.c",
        "patchSetId": 1
      },
      "lineNbr": 78,
      "author": {
        "id": 1000102
      },
      "writtenOn": "2021-01-11T16:11:25Z",
      "side": 1,
      "message": "The ideal way would have been, firing a timer which expires after x ms(say 100ms) and running an SP for y ms(where y(200ms) \u003e x ) but since SPs currently do not have access to physical timer i did a hack by running a SW loop and break it when comes back to SP context after running through cactus interrupt context. This is done to make sure that cactus is running when timer expires.\n\nJust for FYI, \ntest FW Starts the timer and sends blocking request to cactus -\u003e Cactus keeps on running in busy loop-\u003e when timer expires its trapped in SPMC -\u003e SPMC injects interrupt to cactus -\u003e cactus runs in its interrupt context and makes \"busy_loop \u003d 0\" -\u003e when cactus finally returns to its original context it breaks the loop.",
      "parentUuid": "c9a194e2_0c43a359",
      "revId": "ee014ce24a1a770d2e9d0eacf01839ec1b44f3d2",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e85f25a0_cefcca6e",
        "filename": "spm/common/sp_helpers.c",
        "patchSetId": 1
      },
      "lineNbr": 78,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2021-01-11T16:20:51Z",
      "side": 1,
      "message": "SPs indeed can no longer access the physical counter (CNTPCT) although they can still access the virtual counter (CNTVCT) for which Hafnium leaves the offset to 0 for SPs. So eventually CNTVCT follows CNTPCT. This to say that we could improve sp_sleep to access the virtual counter and thus call sp_sleep(200) from cactus_main rather than defining an infinite loop helper.",
      "parentUuid": "0c5759d6_04675e8c",
      "revId": "ee014ce24a1a770d2e9d0eacf01839ec1b44f3d2",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed46dceb_1f83ecdb",
        "filename": "spm/common/sp_helpers.c",
        "patchSetId": 1
      },
      "lineNbr": 78,
      "author": {
        "id": 1000102
      },
      "writtenOn": "2021-01-12T23:35:16Z",
      "side": 1,
      "message": "Done, pushed a separate patch.",
      "parentUuid": "e85f25a0_cefcca6e",
      "revId": "ee014ce24a1a770d2e9d0eacf01839ec1b44f3d2",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "49b82a61_5934cef3",
        "filename": "tftf/tests/tests-spm.xml",
        "patchSetId": 1
      },
      "lineNbr": 51,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2021-01-07T08:26:33Z",
      "side": 1,
      "message": "remove PSA",
      "range": {
        "startLine": 51,
        "startChar": 20,
        "endLine": 51,
        "endChar": 24
      },
      "revId": "ee014ce24a1a770d2e9d0eacf01839ec1b44f3d2",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3ff972fc_f758edd4",
        "filename": "tftf/tests/tests-spm.xml",
        "patchSetId": 1
      },
      "lineNbr": 51,
      "author": {
        "id": 1000102
      },
      "writtenOn": "2021-01-11T16:11:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "49b82a61_5934cef3",
      "range": {
        "startLine": 51,
        "startChar": 20,
        "endLine": 51,
        "endChar": 24
      },
      "revId": "ee014ce24a1a770d2e9d0eacf01839ec1b44f3d2",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    }
  ]
}