{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d78483df_d5b4ac7e",
        "filename": "tftf/tests/runtime_services/standard_service/errata_abi/api_tests/test_errata_abi_functionality.c",
        "patchSetId": 12
      },
      "lineNbr": 423,
      "author": {
        "id": 1000098
      },
      "writtenOn": "2023-05-05T16:15:19Z",
      "side": 1,
      "message": "Something to consider as future improvement:\nThis test needs to be refactored such that it is also run on secondary cores. Currently, it is only run on boot core. Here is an example of such mutlicore test setup:\n\nhttps://git.trustedfirmware.org/TF-A/tf-a-tests.git/tree/tftf/tests/runtime_services/trusted_os/tsp/test_tsp_fast_smc.c#n118",
      "revId": "b2578cf62067663a5f777461e566dc96f15ee8a0",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c8576ccd_3b6b9c61",
        "filename": "tftf/tests/runtime_services/standard_service/errata_abi/api_tests/test_errata_abi_functionality.c",
        "patchSetId": 12
      },
      "lineNbr": 442,
      "author": {
        "id": 1000883
      },
      "writtenOn": "2023-05-05T12:12:01Z",
      "side": 1,
      "message": "up to here, this test does exactly what the other two do. So why have the other two? They\u0027re redundant",
      "revId": "b2578cf62067663a5f777461e566dc96f15ee8a0",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4ffb6a35_5f55ad1b",
        "filename": "tftf/tests/runtime_services/standard_service/errata_abi/api_tests/test_errata_abi_functionality.c",
        "patchSetId": 12
      },
      "lineNbr": 442,
      "author": {
        "id": 1000910
      },
      "writtenOn": "2023-05-05T21:02:22Z",
      "side": 1,
      "message": "Ack, I agree, we can get rid of these lines.. its redundant.",
      "parentUuid": "c8576ccd_3b6b9c61",
      "revId": "b2578cf62067663a5f777461e566dc96f15ee8a0",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "11e5b0b2_faf4dfc7",
        "filename": "tftf/tests/runtime_services/standard_service/errata_abi/api_tests/test_errata_abi_functionality.c",
        "patchSetId": 12
      },
      "lineNbr": 442,
      "author": {
        "id": 1000098
      },
      "writtenOn": "2023-05-08T22:36:57Z",
      "side": 1,
      "message": "These are required and serve as the discovery mechanism as per section 1.4 of the spec.",
      "parentUuid": "4ffb6a35_5f55ad1b",
      "revId": "b2578cf62067663a5f777461e566dc96f15ee8a0",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "17125cdc_b2226609",
        "filename": "tftf/tests/runtime_services/standard_service/errata_abi/api_tests/test_errata_abi_functionality.c",
        "patchSetId": 12
      },
      "lineNbr": 575,
      "author": {
        "id": 1000883
      },
      "writtenOn": "2023-05-05T12:12:01Z",
      "side": 1,
      "message": "at a glance this test will fail on at least the A65AE and A76AE as there are no entries for them, as well as any aarch32 cpus as there is no aarch64 check at the top. It will also fail on any new/unexpected (denver?) cpu this test is run on. This does not sound correct to me. The test failing to recognise a cpu is not the test failing to me. At the very least this should be test skipped.",
      "revId": "b2578cf62067663a5f777461e566dc96f15ee8a0",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4865cd9c_d2bfa7f5",
        "filename": "tftf/tests/runtime_services/standard_service/errata_abi/api_tests/test_errata_abi_functionality.c",
        "patchSetId": 12
      },
      "lineNbr": 575,
      "author": {
        "id": 1000910
      },
      "writtenOn": "2023-05-05T21:02:22Z",
      "side": 1,
      "message": "Ack, yes this makes sense too.. test skipped would be more appropriate, else this might fail the test. I will add the change.",
      "parentUuid": "17125cdc_b2226609",
      "revId": "b2578cf62067663a5f777461e566dc96f15ee8a0",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8640add8_95e23cf8",
        "filename": "tftf/tests/runtime_services/standard_service/errata_abi/api_tests/test_errata_abi_functionality.c",
        "patchSetId": 12
      },
      "lineNbr": 587,
      "author": {
        "id": 1000883
      },
      "writtenOn": "2023-05-05T12:12:01Z",
      "side": 1,
      "message": "I want to challenge the approach of this test in general. I don\u0027t see the struct above to encode what each erratum is expected to return. So how does tftf decide any one of these is the correct return value? I don\u0027t see a comment explaining this either. Is the goal to test _ALL_ errata? That doesn\u0027t seem sustainable (and is also slow, no?) as this list will need updating on every single new erratum. What about different _valid_ builds of tf-a?",
      "revId": "b2578cf62067663a5f777461e566dc96f15ee8a0",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0a8cfa9f_e528f4e5",
        "filename": "tftf/tests/runtime_services/standard_service/errata_abi/api_tests/test_errata_abi_functionality.c",
        "patchSetId": 12
      },
      "lineNbr": 587,
      "author": {
        "id": 1000910
      },
      "writtenOn": "2023-05-05T21:02:22Z",
      "side": 1,
      "message": "It would be difficult to add expected return values as I already tried this approach. \nThe return values from TF-A depends on the CPU model and the rxpx value for that model. \nNewer models seem to have different RxPx values than what we expect, this tends to not match with expected values causing tests to fail. \nThis is the reason for removing expected result field and checking within the switch case for the return values if they match the RXPX range expected in the structure or not. I can add a comment explaining that this test is run assuming that the errata/erratum being tested is enabled during compilation.\n\nIncase of EM_AFFECTED unlike EM_NOT_AFFECTED or EM_HIGHER_EL_MITIGATION, there is no means to communicate between TF-A and TFTF if the errata flag is enabled or disabled. This is why I have no check in that condition. Can you give me an example of what _valid_ in your comment?\n\nIn CI we are only running one model as per my understanding, we can always modify the CI test configs if there is need to check all errata, I only added all erratas for a cpu as a provision to check if required(tried to match with the list in TF-A).",
      "parentUuid": "8640add8_95e23cf8",
      "revId": "b2578cf62067663a5f777461e566dc96f15ee8a0",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}