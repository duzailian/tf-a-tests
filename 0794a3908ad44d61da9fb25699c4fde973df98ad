{
  "comments": [
    {
      "key": {
        "uuid": "3a8484d3_672993d1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2018-12-05T14:01:06Z",
      "side": 1,
      "message": "The commit title looks incorrect to me. AFAIU, this patch creates an explicit section for the stacks, which is distinct from the BSS section.\n\nDid I miss something? Could you please clarify?",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 26
      },
      "revId": "0794a3908ad44d61da9fb25699c4fde973df98ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8ccf174f_937ccb72",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1000050
      },
      "writtenOn": "2018-12-05T15:45:38Z",
      "side": 1,
      "message": "This is more like a reorganization, I\u0027ve changed the title.",
      "parentUuid": "3a8484d3_672993d1",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 26
      },
      "revId": "0794a3908ad44d61da9fb25699c4fde973df98ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4e8b6fa0_7b556c11",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2018-12-05T14:01:06Z",
      "side": 1,
      "message": "nit: Assuming it got this right, perhaps this would be clearer as:\n\n When SPM loads a secure partition, it zeroes the memory\n corresponding to its NOBITS sections for security reasons\n so ...",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 28
      },
      "revId": "0794a3908ad44d61da9fb25699c4fde973df98ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "803fde3f_2c9ead00",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1000050
      },
      "writtenOn": "2018-12-05T15:45:38Z",
      "side": 1,
      "message": "SPM doesn\u0027t know about nobits or progbits, it knows about text, rodata, data and bss because that\u0027s what SPRT defines. I think that the right way to express it is this one.",
      "parentUuid": "4e8b6fa0_7b556c11",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 28
      },
      "revId": "0794a3908ad44d61da9fb25699c4fde973df98ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9f76c358_44e10c91",
        "filename": "spm/cactus/cactus.ld.S",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2018-12-05T14:01:06Z",
      "side": 1,
      "message": "AFAICS, this change is not called out in the commit message and I think it would be nice to explain why it is now needed and what the consequences are.",
      "range": {
        "startLine": 40,
        "startChar": 8,
        "endLine": 40,
        "endChar": 28
      },
      "revId": "0794a3908ad44d61da9fb25699c4fde973df98ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "82b02c80_67640e0b",
        "filename": "spm/cactus/cactus.ld.S",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1000050
      },
      "writtenOn": "2018-12-05T15:45:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9f76c358_44e10c91",
      "range": {
        "startLine": 40,
        "startChar": 8,
        "endLine": 40,
        "endChar": 28
      },
      "revId": "0794a3908ad44d61da9fb25699c4fde973df98ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1104f0c2_60cb0760",
        "filename": "spm/cactus/cactus.ld.S",
        "patchSetId": 1
      },
      "lineNbr": 44,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2018-12-05T14:01:06Z",
      "side": 1,
      "message": "Could we mark the .stacks section as NOLOAD to avoid storing unnecessary zero bytes in the binary? Just like we do in TF-A BL31:\nhttps://git.trustedfirmware.org/TF-A/trusted-firmware-a.git/tree/bl31/bl31.ld.S#n182",
      "range": {
        "startLine": 44,
        "startChar": 4,
        "endLine": 44,
        "endChar": 15
      },
      "revId": "0794a3908ad44d61da9fb25699c4fde973df98ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5045bd1c_25558fc4",
        "filename": "spm/cactus/cactus.ld.S",
        "patchSetId": 1
      },
      "lineNbr": 44,
      "author": {
        "id": 1000050
      },
      "writtenOn": "2018-12-05T15:45:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1104f0c2_60cb0760",
      "range": {
        "startLine": 44,
        "startChar": 4,
        "endLine": 44,
        "endChar": 15
      },
      "revId": "0794a3908ad44d61da9fb25699c4fde973df98ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9fab5db2_f438fc8d",
        "filename": "spm/cactus/cactus.ld.S",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2018-12-05T14:01:06Z",
      "side": 1,
      "message": "Defining a linker symbol named like that here is quite confusing. This is not the start of the BSS section.\n\nWhy do we need this symbol in the 1st place? With the BSS section no longer being zeroed out by Cactus entrypoint code, I assumed it would not be required anymore...",
      "range": {
        "startLine": 46,
        "startChar": 8,
        "endLine": 46,
        "endChar": 26
      },
      "revId": "0794a3908ad44d61da9fb25699c4fde973df98ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0adbe51b_f63f96e4",
        "filename": "spm/cactus/cactus.ld.S",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 1000050
      },
      "writtenOn": "2018-12-05T15:45:38Z",
      "side": 1,
      "message": "Well, I consider the stacks to be part of BSS. I didn\u0027t want to create yet another region in the DTS just for that.",
      "parentUuid": "9fab5db2_f438fc8d",
      "range": {
        "startLine": 46,
        "startChar": 8,
        "endLine": 46,
        "endChar": 26
      },
      "revId": "0794a3908ad44d61da9fb25699c4fde973df98ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba0a9441_ed6bec32",
        "filename": "spm/cactus/cactus.ld.S",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2018-12-06T08:55:36Z",
      "side": 1,
      "message": "OK I understand the use case. I agree we can encompass both stacks and the BSS in the same section. This is all uninitialized data from the point of view of the secure partition loader in SPM. If a secure partition uses dynamic memory allocation and thus needs a heap, I guess we would put it in the same section again.\n\nThat said, I am not keen on using the BSS_START/END names. BSS has a special meaning and I am afraid it will confuse people. Can we use another name, perhaps UNINIT_DATA_START/END?\n\nAlso, I think defining these symbols outside of the sections definitions would be clearer. Let\u0027s say, this linker script puts the sections in this order: 1. stacks 2. bss 3.heap, then I suggest we add the following 2 lines at the end of the linker script:\n\n __UNINIT_DATA_START__ \u003d ADDR(.stacks);\n __UNINIT_DATA_END__ \u003d ADDR(.heap) + SIZEOF(.heap);",
      "parentUuid": "0adbe51b_f63f96e4",
      "range": {
        "startLine": 46,
        "startChar": 8,
        "endLine": 46,
        "endChar": 26
      },
      "revId": "0794a3908ad44d61da9fb25699c4fde973df98ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8318840c_e1bb1eca",
        "filename": "spm/cactus/cactus.ld.S",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 1000050
      },
      "writtenOn": "2018-12-10T16:04:31Z",
      "side": 1,
      "message": "Actually, Roberto has suggested moving the stack out of the linkerscript, and I agree that it is cleaner, we don\u0027t want the linkerscripts to be any longer than they strictly have to.",
      "parentUuid": "ba0a9441_ed6bec32",
      "range": {
        "startLine": 46,
        "startChar": 8,
        "endLine": 46,
        "endChar": 26
      },
      "revId": "0794a3908ad44d61da9fb25699c4fde973df98ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "498878fd_171d1881",
        "filename": "spm/cactus/cactus.ld.S",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2018-12-11T09:30:30Z",
      "side": 1,
      "message": "That makes sense to me. I think we only need a separate stacks section if we want to have precise control on its location in the binary. For example, if we wanted to keep an unmapped, guard page below the stacks to help in detecting stack overflows. I don\u0027t think we need that for secure partitions right now.",
      "parentUuid": "8318840c_e1bb1eca",
      "range": {
        "startLine": 46,
        "startChar": 8,
        "endLine": 46,
        "endChar": 26
      },
      "revId": "0794a3908ad44d61da9fb25699c4fde973df98ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "118d3674_04a15f96",
        "filename": "spm/cactus/cactus.ld.S",
        "patchSetId": 1
      },
      "lineNbr": 48,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2018-12-05T14:01:06Z",
      "side": 1,
      "message": "AFAIU, the stack is now always 4 pages. What was its size before? Where was it defined? I don\u0027t see any modification in this patch that removes the former size, wherever it is.",
      "range": {
        "startLine": 48,
        "startChar": 8,
        "endLine": 48,
        "endChar": 27
      },
      "revId": "0794a3908ad44d61da9fb25699c4fde973df98ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "22f0534b_1ba5fc66",
        "filename": "spm/cactus/cactus.ld.S",
        "patchSetId": 1
      },
      "lineNbr": 48,
      "author": {
        "id": 1000050
      },
      "writtenOn": "2018-12-05T15:45:38Z",
      "side": 1,
      "message": "I think that the former size was passed from the TF and Cactus used whatever it got (from the boot struct).",
      "parentUuid": "118d3674_04a15f96",
      "range": {
        "startLine": 48,
        "startChar": 8,
        "endLine": 48,
        "endChar": 27
      },
      "revId": "0794a3908ad44d61da9fb25699c4fde973df98ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f20b3de8_8883249c",
        "filename": "spm/cactus/cactus.ld.S",
        "patchSetId": 1
      },
      "lineNbr": 48,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2018-12-06T08:55:36Z",
      "side": 1,
      "message": "OK that makes sense to me.\n\nDon\u0027t we want to be able to change the stack size more easily by defining e.g. a CACTUS_STACKS_SIZE macro in cactus_def.h rather than burying it in the linker script?",
      "parentUuid": "22f0534b_1ba5fc66",
      "range": {
        "startLine": 48,
        "startChar": 8,
        "endLine": 48,
        "endChar": 27
      },
      "revId": "0794a3908ad44d61da9fb25699c4fde973df98ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6f1e56b6_1f359416",
        "filename": "spm/cactus/cactus.ld.S",
        "patchSetId": 1
      },
      "lineNbr": 48,
      "author": {
        "id": 1000050
      },
      "writtenOn": "2018-12-10T16:04:31Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "f20b3de8_8883249c",
      "range": {
        "startLine": 48,
        "startChar": 8,
        "endLine": 48,
        "endChar": 27
      },
      "revId": "0794a3908ad44d61da9fb25699c4fde973df98ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    }
  ]
}