{
  "comments": [
    {
      "key": {
        "uuid": "4e2d7e9f_13bf9de9",
        "filename": "spm/cactus/cactus_helpers.c",
        "patchSetId": 6
      },
      "lineNbr": 34,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2020-09-08T18:34:11Z",
      "side": 1,
      "message": "might want to leave the spm helper functions and call them here in the cactus_* wrapper functions. Other partitions might use the spm helpers.",
      "range": {
        "startLine": 29,
        "startChar": 1,
        "endLine": 34,
        "endChar": 17
      },
      "revId": "6794119e3c3aada256daf9a8be86a833eabcebf4",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5edf89de_8da26282",
        "filename": "spm/cactus/cactus_helpers.c",
        "patchSetId": 6
      },
      "lineNbr": 34,
      "author": {
        "id": 1000162
      },
      "writtenOn": "2020-09-09T04:42:18Z",
      "side": 1,
      "message": "Dont follow. cactus_mm does not need these functions. All cactus partitions will use this file, so they can use this code.",
      "parentUuid": "4e2d7e9f_13bf9de9",
      "range": {
        "startLine": 29,
        "startChar": 1,
        "endLine": 34,
        "endChar": 17
      },
      "revId": "6794119e3c3aada256daf9a8be86a833eabcebf4",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a021dcc3_64e6258d",
        "filename": "spm/cactus/cactus_helpers.c",
        "patchSetId": 6
      },
      "lineNbr": 34,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2020-09-09T16:45:23Z",
      "side": 1,
      "message": "Sorry, i meant sp_helpers.c will be used by even non-cactus partitions. Lets say i write a new S-EL1 partition \"foo\", i would like to use sp_helpers.c to talk to the spm through spm_vcpu_get_count and not through cactus_vcpu_get_count. I\u0027m trying to say leave sp_helpers.c as is for other partitions to use.\n\nI also meant that cactus_helpers.c can call spm_vcpu_get_count for ex, in the #else case.\nDoes that make sense?",
      "parentUuid": "5edf89de_8da26282",
      "range": {
        "startLine": 29,
        "startChar": 1,
        "endLine": 34,
        "endChar": 17
      },
      "revId": "6794119e3c3aada256daf9a8be86a833eabcebf4",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "31083b1f_bdff3239",
        "filename": "spm/cactus/cactus_helpers.c",
        "patchSetId": 6
      },
      "lineNbr": 34,
      "author": {
        "id": 1000162
      },
      "writtenOn": "2020-09-09T16:48:38Z",
      "side": 1,
      "message": "No, does not make sense. We have seen that for multiple partition tests, multiple Cactus images are used.  Even if we plan to bring in OP-TEE, it will have its own helpers. So I feel that this is a hypothetical scenario.",
      "parentUuid": "a021dcc3_64e6258d",
      "range": {
        "startLine": 29,
        "startChar": 1,
        "endLine": 34,
        "endChar": 17
      },
      "revId": "6794119e3c3aada256daf9a8be86a833eabcebf4",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "066abeed_c76a7d6a",
        "filename": "spm/cactus/cactus_helpers.c",
        "patchSetId": 6
      },
      "lineNbr": 34,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2020-09-09T16:55:14Z",
      "side": 1,
      "message": "sp_helpers.c is under spm/common. My understanding is that sp_helpers.c is meant to be used and linked into cactus, ivy or any other partition that may come along and runs on hafnium. It is not meant only for cactus. If you bring in OPTEE, it could be used sp_helpers.c and not meant to be cactus specific. The HVC\u0027s in sp_helpers.c are an interface specific to hafnium SPMC. So i\u0027m not sure why you are deleting sp_helpers.c in this patch and removing common code that could be used by other partitions.",
      "parentUuid": "31083b1f_bdff3239",
      "range": {
        "startLine": 29,
        "startChar": 1,
        "endLine": 34,
        "endChar": 17
      },
      "revId": "6794119e3c3aada256daf9a8be86a833eabcebf4",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1844985b_e667b35a",
        "filename": "spm/cactus/cactus_helpers.c",
        "patchSetId": 6
      },
      "lineNbr": 34,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2020-09-09T16:56:02Z",
      "side": 1,
      "message": "also probably does not help that this comment is in cactus_helpers.c :) This comment should be in sp_helpers.c.",
      "parentUuid": "066abeed_c76a7d6a",
      "range": {
        "startLine": 29,
        "startChar": 1,
        "endLine": 34,
        "endChar": 17
      },
      "revId": "6794119e3c3aada256daf9a8be86a833eabcebf4",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e3d44cf1_1de56da7",
        "filename": "spm/cactus/cactus_helpers.c",
        "patchSetId": 6
      },
      "lineNbr": 34,
      "author": {
        "id": 1000162
      },
      "writtenOn": "2020-09-09T18:54:07Z",
      "side": 1,
      "message": "Ivy is SEL0 and would be deprecated. OP-TEE wont probably link to codebase under spm and use the remaining code from its own folders. Which leaves Cactus. The SPM calls are only used by cactus today and not by cactus_mm, so there aint any users on the horizon.\n\nYou can argue that cactus_spmc, if required in the future, will benefit from these calls. And that is a compelling argument IMO",
      "parentUuid": "1844985b_e667b35a",
      "range": {
        "startLine": 29,
        "startChar": 1,
        "endLine": 34,
        "endChar": 17
      },
      "revId": "6794119e3c3aada256daf9a8be86a833eabcebf4",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d066d8a3_11be7426",
        "filename": "spm/cactus/cactus_helpers.c",
        "patchSetId": 6
      },
      "lineNbr": 34,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2020-09-10T08:28:26Z",
      "side": 1,
      "message": "Those specific wrappers (cactus_vm_get_count and cactus_vcpu_get_count) will be stripped out as support has been removed from Hafnium (https://git.trustedfirmware.org/hafnium/hafnium.git/commit/?id\u003dae3840dbc9372fd407893f32a5d624828c8933ae).\n\nSo CACTUS_SEL1_SPMC_VM_COUNT and CACTUS_SEL1_SPMC_VCPU_COUNT definitions are not required.\n\nIt only remains spm_debug_log and I agree with Raghu this must be a common wrapper to all SPs.\n\nNotice Ivy will be re-purposed soon to implement S-EL0 partitions on top of Hafnium (using the non-VHE / S-EL1 shim model).",
      "parentUuid": "e3d44cf1_1de56da7",
      "range": {
        "startLine": 29,
        "startChar": 1,
        "endLine": 34,
        "endChar": 17
      },
      "revId": "6794119e3c3aada256daf9a8be86a833eabcebf4",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    }
  ]
}