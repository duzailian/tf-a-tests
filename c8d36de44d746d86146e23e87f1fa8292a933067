{
  "comments": [
    {
      "key": {
        "uuid": "0be197e1_e1d38342",
        "filename": "drivers/console/aarch64/dummy_console.S",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-04-03T11:54:55Z",
      "side": 1,
      "message": "Do these functions need to be implemented in assembly? Can\u0027t they be in C instead?\n\nAFAICS, console_init() is called from tftf_early_platform_setup() and at this time we\u0027ve already got a stack set up (although it is the temporary one). For secure partitions, it\u0027s even called later, in their main function.",
      "revId": "c8d36de44d746d86146e23e87f1fa8292a933067",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ceb49ab9_6aeea368",
        "filename": "drivers/console/aarch64/dummy_console.S",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000050
      },
      "writtenOn": "2019-04-04T13:43:37Z",
      "side": 1,
      "message": "Same as the comment below. I think that, because this could be used as skeleton for new consoles, it is better to have it in assembly. I can imagine some people will simply copy code from TF into this repository and this way it is easier for them to do it.",
      "parentUuid": "0be197e1_e1d38342",
      "revId": "c8d36de44d746d86146e23e87f1fa8292a933067",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b502113f_f83c7b8f",
        "filename": "drivers/console/aarch64/dummy_console.S",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-04-04T15:09:23Z",
      "side": 1,
      "message": "Are you saying that there is no technical reason for implementing this console driver in C from the point of view of TF-A Tests (i.e. that these are indeed called after the stack has been setup), but in the case of TF-A this console driver is used much earlier (i.e. before the stacks are setup) so it is required to implement them in assembly language there?",
      "parentUuid": "ceb49ab9_6aeea368",
      "revId": "c8d36de44d746d86146e23e87f1fa8292a933067",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "33641b12_65cc0cba",
        "filename": "drivers/console/aarch64/dummy_console.S",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000050
      },
      "writtenOn": "2019-04-05T09:29:56Z",
      "side": 1,
      "message": "I\u0027m saying that in the TF someone may write a driver in assembly, and then that someone may want to reuse it here because they have already tested it. If they take this driver as base, they could just copy paste code from the TF.",
      "parentUuid": "b502113f_f83c7b8f",
      "revId": "c8d36de44d746d86146e23e87f1fa8292a933067",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5f664801_fb5cb16a",
        "filename": "drivers/console/aarch64/dummy_console.S",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-04-09T07:41:23Z",
      "side": 1,
      "message": "You\u0027ve mentioned 2 scenarios here, as far as I can see.\n\n1) One wants to implement a new console driver from scratch.\n\nIIUC, you\u0027re claiming that providing this driver skeleton will help them. First of all, I am not too convinced. I think that the console driver interface is clearly exposed in include/drivers/console.h and gives a clear view of what functions people need to implement. I don\u0027t feel like we need to provide them with placeholders to fill in.\n\nSecondly, if we do want to provide a skeleton, I\u0027d rather provide one in C if that\u0027s possible. We should always try to limit the amount of assembly language. Encouraging people to write more asm code does not sound right to me.\n\n2) One already has a console driver for their platform in TF-A and wants to import this code in TF-A Tests.\n\nIn this case, the code already exists so how would this file help them in this context? I would imagine that it\u0027s just a matter of copying the driver file as is (perhaps tweaking a few things), and just add a line in the right makefile to use it. Also, what if the existing console driver is implemented in C? Going by your logic, we should also provide a C skeleton.\n\n\nI don\u0027t understand what this patch buys us. Also I do not see dummy_console.S being used in subsequent patches. It is included in quark.mk [1] but none of the console_* functions seem to be called.\n\n[1] https://review.trustedfirmware.org/c/TF-A/tf-a-tests/+/777/3/spm/quark/quark.mk#41",
      "parentUuid": "33641b12_65cc0cba",
      "revId": "c8d36de44d746d86146e23e87f1fa8292a933067",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d2b3b60d_75d96e18",
        "filename": "drivers/console/aarch64/dummy_console.S",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000050
      },
      "writtenOn": "2019-04-09T08:54:26Z",
      "side": 1,
      "message": "It\u0027s safe to assume that whoever creates a driver here has already created it for the TF. Console drivers are different in TF and TFTF. If you want to reuse code from the TF here you can\u0027t just copy the file, you can copy the body of the functions and having a file with placeholders makes it easier.\n\nAlso, given that the TF needs the drivers to be in assembly, and that the current drivers in the TFTF are also in assembly, it makes sense to keep it in assembly.\n\nQuark doesn\u0027t directly print anything, but it depends on the SPRT library, which depends on assert, which depends on the console.",
      "parentUuid": "5f664801_fb5cb16a",
      "revId": "c8d36de44d746d86146e23e87f1fa8292a933067",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "226fd7c9_06bcf53c",
        "filename": "drivers/console/aarch64/dummy_console.S",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-04-03T11:54:55Z",
      "side": 1,
      "message": "Does it make sense to keep all this information for this empty implementation? I realize that this describes what a real implementation would do but things like \"It saves the console base to the data section\" or \"Clobber list : x1 - x3\" might sound confusing here.",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 26,
        "endChar": 26
      },
      "revId": "c8d36de44d746d86146e23e87f1fa8292a933067",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9838d1b6_c4860f6d",
        "filename": "drivers/console/aarch64/dummy_console.S",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 1000050
      },
      "writtenOn": "2019-04-04T13:43:37Z",
      "side": 1,
      "message": "Well, the problem is that people could use this as a template for new consoles. Leaving the comment can be helpful in that case, they would get the documentation for free.",
      "parentUuid": "226fd7c9_06bcf53c",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 26,
        "endChar": 26
      },
      "revId": "c8d36de44d746d86146e23e87f1fa8292a933067",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e26cf5df_5992c177",
        "filename": "drivers/console/aarch64/dummy_console.S",
        "patchSetId": 1
      },
      "lineNbr": 30,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-04-03T11:54:55Z",
      "side": 1,
      "message": "I read the following lines in include/drivers/console.h:\n\n /* Returned by console_xxx() if the registered console doesn\u0027t implement xxx. */\n #define ERROR_NO_VALID_CONSOLE\t\t(-128)\n\nShould console_init() here return ERROR_NO_VALID_CONSOLE?\n\nSame question for console_putc() and console_flush().",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 30,
        "endChar": 4
      },
      "revId": "c8d36de44d746d86146e23e87f1fa8292a933067",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "95a69007_432a08d8",
        "filename": "drivers/console/aarch64/dummy_console.S",
        "patchSetId": 1
      },
      "lineNbr": 30,
      "author": {
        "id": 1000050
      },
      "writtenOn": "2019-04-04T13:43:37Z",
      "side": 1,
      "message": "For console_init and flush I forgot to add the return value.\n\nFor putc it should return the same character that has been printed. In that case, I can simply return x0, as it is the character to be printed.",
      "parentUuid": "e26cf5df_5992c177",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 30,
        "endChar": 4
      },
      "revId": "c8d36de44d746d86146e23e87f1fa8292a933067",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    }
  ]
}