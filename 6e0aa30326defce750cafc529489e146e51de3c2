{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d264851e_82b38b85",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000660
      },
      "writtenOn": "2024-09-12T13:18:38Z",
      "side": 1,
      "message": "LGTM.\nIn my understanding, altogether 2 issues resolved here:\n\n* Skipping the tests rather than passing as its tough to identify b/w \n  undef_injection and other EL2 TRAPS as both return same error. So its better to \n  skip, when hardware doesn\u0027t support feature.\n\n* Test should be validating software than hardware. So when the ID register \n  indicate \"no\" skipping the test is the best option.\n\n* Splitting the test for better maintenance of the overall test_suite. It also \n  gives better clarity on which feature test was skipped/passed/failed.\n\n@Arvind / @Manish P, kindly have a look and share your thoughts.",
      "revId": "6e0aa30326defce750cafc529489e146e51de3c2",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b6e2bd0c_b7079879",
        "filename": "tftf/tests/misc_tests/test_asymmetric_features.c",
        "patchSetId": 2
      },
      "lineNbr": 227,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2024-10-23T10:47:37Z",
      "side": 1,
      "message": "IIUC, if the test is not skipped on one of the CPUs during this iteration, the loop breaks. Should we also check the failure/success response from all CPUs, and if any CPU fails, mark the test as a failure otherwise success.\n\nI\u0027m considering a scenario where, for example, the test passes on the lead CPU but fails on a non-lead CPU. In this case, the loop would break after the first CPU, ignoring the failure from the other non-lead CPUs. IIUC, the current logic only returns the test result at line 234 based on the lead CPU\u0027s response, potentially overlooking failures from other CPUs.\n\nPossibly I\u0027m missing something.",
      "range": {
        "startLine": 226,
        "startChar": 0,
        "endLine": 227,
        "endChar": 9
      },
      "revId": "6e0aa30326defce750cafc529489e146e51de3c2",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a798b722_32e49ca4",
        "filename": "tftf/tests/misc_tests/test_asymmetric_features.c",
        "patchSetId": 2
      },
      "lineNbr": 227,
      "author": {
        "id": 1000660
      },
      "writtenOn": "2024-10-23T11:52:12Z",
      "side": 1,
      "message": "Hi,\nLoops breaks, if any of the CPUs in the cluster has executed the test.\n```\nInitially, test_skipped[PLATFORM_CORE_COUNT] \u003d { 0, 0, 0, 0, 0, 0, 0,0} (#line 144)\n```\nThen we run tests on each CPU and this array gets updated for each CPU.\nLets say if CPU1, has executed the test, meaning feature is present in the hardware, in that case this array will be untouched. \nOn the other side, lets say CPU3, does,\u0027t support the feature, meaning test has to be skipped in for that CPU, so the array will be updated, set to true.\ntest_skipped[PLATFORM_CORE_COUNT] \u003d { 0, 0, 0, 1, 0, 0, 0,0} \n\nThis final array will be considred.\n\nIf the array reads 0, for all the CPUS, then feature is present in all the CPUs.\n\n\nSo to summarise,\n```\nif test_skipped[PLATFORM_CORE_COUNT] \u003d { 0, 0, 0, 1, 0, 0, 0,0} \n loop breaks as atleast there was one or even more CPUs which executed the test.\n \nif test_skipped[PLATFORM_CORE_COUNT] \u003d { 1,1,1,1,1,1,1,1} \n loop does not break as there was not even one CPU, which executed the test.\n```",
      "parentUuid": "b6e2bd0c_b7079879",
      "range": {
        "startLine": 226,
        "startChar": 0,
        "endLine": 227,
        "endChar": 9
      },
      "revId": "6e0aa30326defce750cafc529489e146e51de3c2",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}